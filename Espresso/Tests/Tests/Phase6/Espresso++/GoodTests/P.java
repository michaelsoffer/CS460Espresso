//(227)
//
//a = 2.0
//b = 2.0
//c = -12.0
//Number of Roots: 2
//Root 1 = 2.0
//Root 2 = -3.0
//2.0(x - 2.0)(x + 3.0)
//                                                        Chart title
//       +---------------------------------------------------------------------------------------------------------------+
//    20-+ -----*-------------------------------------------------------------------------------*----------------------- |
//       |                                                                                                               |
//    18-+ ------*-----------------------------------------------------------------------------*------------------------ |
//       |                                                                                                               |
//       |        *                                                                           *                          |
//    15-+ --------*-------------------------------------------------------------------------*-------------------------- |
//       |                                                                                                               |
//       |          *                                                                       *                            |
//    12-+ ----------*---------------------------------------------------------------------*---------------------------- |
//       |            *                                                                   *                              |
//       |                                                                                                               |
//     9-+ ------------*-----------------------------------------------------------------*------------------------------ |
//       |              *                                                               *                                |
//       |               *                                                             *                                 |
//     6-+ ---------------*-----------------------------------------------------------*--------------------------------- |
//       |                                                                                                               |
//       |                 *                                                         *                                   |
//     3-+ -----------------*-------------------------------------------------------*----------------------------------- |
//       |                   *                                                     *                                     |
//       |                    *                                                   *                                      |
//     0-+ --------------------*-------------------------------------------------*-------------------------------------- |
//       |                      *                                               *                                        |
//       |                       *                                             *                                         |
//    -3-+ -----------------------*-------------------------------------------*----------------------------------------- |
//       |                         **                                        *                                           |
//       |                           *                                     **                                            |
//    -6-+ ---------------------------*-----------------------------------*--------------------------------------------- |
//       |                             **                               **                                               |
//       |                               *                             *                                                 |
//    -9-+ -------------------------------**-------------------------**------------------------------------------------- |
//       |                                  ***                    **                                                    |
//       |                                     **               ***                                                      |
//   -12-+ --------------------------------------***************-------------------------------------------------------- |
//       |                                                                                                               |
//       |                                                                                                               |
//   -15-+ ------------------------------------------------------------------------------------------------------------- |
//       +---------------------------------------------------------------------------------------------------------------+
//                                                  y = 2.0x^2 + 2.0x - 12.0
//                                                         Some Title
//       +---------------------------------------------------------------------------------------------------------------+
//    30-+ ------------------------------------------------------------------------------------------------------------- |
//       |        *                                                                                     *                |
//    28-+ ------------------------------------------------------------------------------------------------------------- |
//       |         *                                                                                   *                 |
//       |          *                                                                                 *                  |
//       |                                                                                                               |
//    24-+ ----------*-------------------------------------------------------------------------------*------------------ |
//       |                                                                                                               |
//       |            *                                                                             *                    |
//       |             *                                                                           *                     |
//    20-+ ------------------------------------------------------------------------------------------------------------- |
//       |              *                                                                         *                      |
//       |               *                                                                       *                       |
//       |                *                                                                     *                        |
//    16-+ ------------------------------------------------------------------------------------------------------------- |
//       |                 *                                                                   *                         |
//       |                  *                                                                 *                          |
//       |                                                                                                               |
//    12-+ ------------------*---------------------------------------------------------------*-------------------------- |
//       |                    *                                                             *                            |
//       |                     *                                                           *                             |
//       |                      *                                                         *                              |
//     8-+ ----------------------*-------------------------------------------------------*------------------------------ |
//       |                        *                                                     *                                |
//       |                         *                                                   *                                 |
//       |                          *                                                 *                                  |
//     4-+ --------------------------*-----------------------------------------------*---------------------------------- |
//       |                            *                                             *                                    |
//       |                             *                                           *                                     |
//       |                              *                                         *                                      |
//     0-+ ------------------------------*---------------------------------------*-------------------------------------- |
//       |                                *                                     *                                        |
//       |                                 **                                 **                                         |
//       |                                   **                              *                                           |
//    -4-+ ------------------------------------*---------------------------**------------------------------------------- |
//       |                                      **                       **                                              |
//       |                                        ***                 ***                                                |
//       |                                           ****          ***                                                   |
//    -8-+ ----------------------------------------------**********----------------------------------------------------- |
//       |                                                                                                               |
//   -10-+ ------------------------------------------------------------------------------------------------------------- |
//       +---------------------------------------------------------------------------------------------------------------+
//                                                      y = 2.0x^2 - 8.0
//                                                        Chart title
//       +---------------------------------------------------------------------------------------------------------------+
//    30-+ ------------------------------------------------------------------------------------------------------------- |
//       |                                                                                                               |
//       |                                                                                                               |
//       |                                                                             *                                 |
//       |                                                                                                               |
//       |                                                                                                               |
//    24-+ ------------------------------------------------------------------------------------------------------------- |
//       |                                                                            *                                  |
//       |                                                                                                               |
//       |                                                                                                               |
//       |                                                                           *                                   |
//       |                                                                                                               |
//    18-+ ------------------------------------------------------------------------------------------------------------- |
//       |                                                                                                               |
//       |                                                                          *                                    |
//       |                                                                                                               |
//       |                                                                                                               |
//       |                                                                         *                                     |
//    12-+ ------------------------------------------------------------------------------------------------------------- |
//       |                                                                        *                                      |
//       |                                                                                                               |
//       |                                                                                                               |
//       |                                                                       *                                       |
//       |                                                                                                               |
//     6-+ ---------------------------------------------------------------------*--------------------------------------- |
//       |                                                                                                               |
//       |                                                                     *                                         |
//       |                                                                                                               |
//       |                                                                    *                                          |
//       |                                                                                                               |
//     0-+ ------------------------------------------------------------------*------------------------------------------ |
//       |                                                                  *                                            |
//       |                                                                                                               |
//       |                                                                 *                                             |
//       |                                                                *                                              |
//       |                                                              **                                               |
//    -6-+ ------------------------------------------------------------*------------------------------------------------ |
//       |                                                          ***                                                  |
//       |                                             *************                                                     |
//       |                                          ***                                                                  |
//       |                                         *                                                                     |
//       |                                       **                                                                      |
//   -12-+ -------------------------------------*----------------------------------------------------------------------- |
//       |                                     *                                                                         |
//       |                                                                                                               |
//       |                                    *                                                                          |
//       |                                   *                                                                           |
//       |                                                                                                               |
//   -18-+ ---------------------------------*--------------------------------------------------------------------------- |
//       |                                                                                                               |
//       |                                 *                                                                             |
//       |                                                                                                               |
//       |                                *                                                                              |
//       |                                                                                                               |
//   -24-+ ------------------------------*------------------------------------------------------------------------------ |
//       |                                                                                                               |
//       |                                                                                                               |
//       |                              *                                                                                |
//       |                                                                                                               |
//       |                             *                                                                                 |
//   -30-+ ------------------------------------------------------------------------------------------------------------- |
//       +---------------------------------------------------------------------------------------------------------------+
//                                                      y = 2.0x^3 - 8.0
//                                                        Chart title
//       +---------------------------------------------------------------------------------------------------------------+
//    10-+                                                    *                                                          |
//       |                                                                                                               |
//     8-+                                                                                                               |
//       |                                                                                                               |
//     6-+                                                                                                               |
//       |                                                     *                                                         |
//     4-+                                                                                                               |
//       |                                                      **                                                       |
//     2-+                                                        **                                                     |
//       |                                                          **************                                       |
//     0-+ *******************************                                        ******************************         |
//       |                                *************                                                                  |
//    -2-+                                             ***                                                               |
//       |                                                *                                                              |
//    -4-+                                                                                                               |
//       |                                                 *                                                             |
//    -6-+                                                                                                               |
//       |                                                                                                               |
//    -8-+                                                                                                               |
//       |                                                                                                               |
//   -10-+                                                  *                                                            |
//       +---------------------------------------------------------------------------------------------------------------+
//                                                          y = 1/x
//                                                                              Chart title
//       +----------------------------------------------------------------------------------------------------------------------------------------------------------+
//    20-+ -----------------------------------------------------------------------------------------------------------------------------------------------------**- |
//       |                                                                                                                                                   ***    |
//       |                                                                                                                                                ***       |
//       |                                                                                                                                             ***          |
//    16-+ -----------------------------------------------------------------------------------------------------------------------------------------***------------ |
//       |                                                                                                                                       ***                |
//       |                                                                                                                                    ***                   |
//       |                                                                                                                                 ***                      |
//    12-+ -----------------------------------------------------------------------------------------------------------------------------***------------------------ |
//       |                                                                                                                           ***                            |
//       |                                                                                                                        ***                               |
//       |                                                                                                                     ***                                  |
//     8-+ -----------------------------------------------------------------------------------------------------------------***------------------------------------ |
//       |                                                                                                               ***                                        |
//       |                                                                                                            ***                                           |
//       |                                                                                                         ***                                              |
//     4-+ -----------------------------------------------------------------------------------------------------***------------------------------------------------ |
//       |                                                                                                   ***                                                    |
//       |                                                                                                ***                                                       |
//       |                                                                                             ***                                                          |
//     0-+ -----------------------------------------------------------------------------------------***------------------------------------------------------------ |
//       |                                                                                       ***                                                                |
//       |                                                                                    ***                                                                   |
//       |                                                                                 ***                                                                      |
//    -4-+ -----------------------------------------------------------------------------***------------------------------------------------------------------------ |
//       |                                                                           ***                                                                            |
//       |                                                                        ***                                                                               |
//       |                                                                     ***                                                                                  |
//    -8-+ -----------------------------------------------------------------***------------------------------------------------------------------------------------ |
//       |                                                               ***                                                                                        |
//       |                                                            ***                                                                                           |
//       |                                                         ***                                                                                              |
//   -12-+ -----------------------------------------------------***------------------------------------------------------------------------------------------------ |
//       |                                                   ***                                                                                                    |
//       |                                                ***                                                                                                       |
//       |                                             ***                                                                                                          |
//   -16-+ -----------------------------------------***------------------------------------------------------------------------------------------------------------ |
//       |                                       ***                                                                                                                |
//       |                                    ***                                                                                                                   |
//       |                                 ***                                                                                                                      |
//   -20-+ -----------------------------***------------------------------------------------------------------------------------------------------------------------ |
//       +----------------------------------------------------------------------------------------------------------------------------------------------------------+
//                                                                            y = 1.0x - 5.0

import Math;
import System;

public abstract class Function {
  public abstract double evaluate(double x);

  public String toString() {
    return "toString not implemented";
  }

}

public class F1 extends Function {
  public double evaluate(double x) {
    return 1.0 / x;
  }

  public String toString() {
    return "1/x";
  }

}

public class Plot {
  private int minX, minY, maxX, maxY;
  private int deltaX;
  private String title = "Chart title";
  private char[][] plot;
  private Function p;

  public Plot(Function poly, int minx, int maxx, int miny, int maxy,
      int delta) {
    minX = minx;
    minY = miny;
    maxX = maxx;
    maxY = maxy;
    p = poly;
    deltaX = delta;
    int X = delta * (maxx - minx + 1);
    plot = new char[X][(maxy - miny + 1)];
    for (int i = 0; i < X; i++)
      for (int j = 0; j < maxy - miny + 1; j++)
        plot[i][j] = ' ';

    double xvalue = minx;
    int i = 0;
    while (xvalue <= maxX) {
      double d = p.evaluate(xvalue);
      int val = (int)Math.round(d);
      xvalue = xvalue + (1.0 / delta);
      if (val <= maxy && val >= miny) {
        //System.out.println("plot["+i+"]["+(maxy-val)+"] = " + val + "(xvalue = " + xvalue + ") " +d);
        plot[i][maxy - val] = '*';
      }
      i++;
      //System.out.println(xvalue + " " + i + " x = " + X);
    }
  }

  private String justify(String s, int size) {
    int l = s.length();
    for (int i = 0; i < size - l; i++)
      s = " " + s;
    return s;
  }

  public void setTitle(String title) {
    this.title = title;
  }

  public void print(boolean withguidelines) {

    int divmark = (plot[0].length - 1) / 10;
    System.out.println("       "
        + justify(title, (plot.length + title.length()) / 2));
    System.out.print("       +");
    for (int x = 0; x < plot.length; x++)
      System.out.print("-");
    System.out.println("-+");
    for (int y = 0; y <= plot[0].length - 1; y++) {
      if ((maxY - y) % divmark == 0 || y == 0
          || y == plot[0].length - 1)
        System.out.print(justify("" + (maxY - y), 6) + "-+ ");
      else
        System.out.print("       | ");

      for (int x = 0; x < plot.length - 1; x++) {
        if (withguidelines && ((maxY - y) % divmark == 0 || y == 0
            || y == plot[0].length - 1) && plot[x][y] == ' ')
          System.out.print("-");
        else
          System.out.print(plot[x][y]);
      }
      System.out.println(" |");

    }

    System.out.print("       +");
    for (int x = 0; x < plot.length; x++)
      System.out.print("-");
    System.out.println("-+");
    String t = "y = " + p;
    System.out.println(
        "       " + justify(t, (t.length() + plot.length) / 2));

  }
}

public abstract class Poly extends Function {

}
public class Poly1 extends Poly {
  double a, b;

  public Poly1(double a, double b) {
    this.a = a;
    this.b = b;
  }

  public double evaluate(double x) {
    return a * x + b;
  }

  public String toString() {
    return a + "x"
        + (b != 0 ? (b > 0 ? " + " + b : " - " + (-1 * b)) : "");
  }
}
public class Poly2 extends Poly {
  private double a, b, c;

  public Poly2(double a, double b, double c) {
    this.a = a;
    this.b = b;
    this.c = c;
  }

  public double get_a() {
    return a;
  }

  public double get_b() {
    return b;
  }

  public double get_c() {
    return c;
  }

  public double evaluate(double x) {
    return a * x * x + b * x + c;
  }

  public int no_real_roots() {
    double discriminant = b * b - 4 * a * c;
    if (discriminant < 0)
      return 0;
    else if (discriminant == 0)
      return 1;
    else
      return 2;
  }

  public double root1() {
    double discriminant = b * b - 4 * a * c;
    return (-b + Math.sqrt(discriminant)) / (2 * a);
  }

  public double root2() {
    double discriminant = b * b - 4 * a * c;
    return (-b - Math.sqrt(discriminant)) / (2 * a);
  }

  public String toString() {
    return a + "x^2"
        + (b != 0 ? (b < 0 ? " - " + (-1 * b) : " + " + b) + "x" : "")
        + (c != 0 ? (c < 0 ? " - " + (-1 * c) : " + " + c) : "");
  }

  public String factor() {
    double root1 = root1();
    double root2 = root2();

    return a + "(x"
        + (root1 < 0 ? " + " + (-1 * root1) : " - " + root1) + ")(x"
        + (root2 < 0 ? " + " + (-1 * root2) : " - " + root2) + ")";
  }

  public char[][] plot(int minx, int maxx, int miny, int maxy,
      int delta) {
    int X = delta * (maxx - minx + 1);
    System.out.println("X = " + X);
    char plot[][] = new char[X][(maxy - miny + 1)];
    for (int i = 0; i < X; i++)
      for (int j = 0; j < maxy - miny + 1; j++)
        plot[i][j] = ' ';

    double xvalue = minx;
    int i = 0;
    while (xvalue < X) {
      int val = (int)Math.round(evaluate(xvalue));
      xvalue = xvalue + (1.0 / delta);
      if (val <= maxy && val >= miny) {
        plot[i][maxy - val] = '*';
      }
      i++;
    }
    return plot;
  }

  public static void print_plot(char plot[][]) {
    for (int x = 0; x < plot[0].length - 1; x++) {
      System.out.print("  | ");

      for (int y = 0; y < plot.length - 1; y++) {
        System.out.print(plot[y][x]);
      }
      System.out.println(" |");
    }
    System.out.print("--+");
    for (int x = 0; x < plot.length - 1; x++)
      System.out.print("-");
    System.out.println("+");

  }
}
public class Poly3 extends Poly {
  private double a, b, c, d;

  public Poly3(double a, double b, double c, double d) {
    this.a = a;
    this.b = b;
    this.c = c;
    this.d = d;
  }

  public double evaluate(double x) {
    return a * x * x * x + b * x * x + c * x + d;
  }

  public String toString() {
    return a + "x^3"
        + (b != 0 ? (b < 0 ? " - " + (-1 * b) : " + " + b) + "x^2"
            : "")
        + (c != 0 ? (c < 0 ? " - " + (-1 * c) : " + " + c) + "x" : "")
        + (d != 0 ? (d < 0 ? " - " + (-1 * d) : " + " + d) : "");
  }
}

public class Driver {

  public static void main(String args[]) {
    Poly2 p1 = new Poly2(2, 2, -12);
    System.out.println("a = " + p1.get_a());
    System.out.println("b = " + p1.get_b());
    System.out.println("c = " + p1.get_c());
    System.out.println("Number of Roots: " + p1.no_real_roots());
    System.out.println("Root 1 = " + p1.root1());
    System.out.println("Root 2 = " + p1.root2());
    System.out.println(p1.factor());

    Plot p = new Plot(p1, -5, 5, -15, 20, 10);
    p.print(true);
    Poly2 p2 = new Poly2(2, 0, -8);
    Plot pp = new Plot(p2, -5, 5, -10, 30, 10);
    pp.setTitle("Some Title");
    pp.print(true);
    new Plot(new Poly3(2, 0, 0, -8), -5, 5, -30, 30, 10).print(true);
    new Plot(new F1(), -5, 5, -10, 10, 10).print(false);
    new Plot(new Poly1(1, -5), -25, 25, -20, 20, 3).print(true);

  }

}